<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta property="og:title" content="SYNAPSE ON : ì‚¬ë‘ì˜ ë²ˆì—­ê¸°">
    <meta property="og:description" content="ì„œë¡œì˜ ë§ˆìŒì„ ê°€ì¥ ê¹Šê²Œ ì´í•´í•˜ê¸° ìœ„í•œ 9ë‹¨ê³„ ì •ë°€ ë¶„ì„.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?q=80&w=1000&auto=format&fit=crop">
    <meta property="og:type" content="website">

    <title>ì‹œëƒ…ìŠ¤ ì˜¨ : [SYNAPSE ON]</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        /* [DESIGN SYSTEM: Deep Love & Neon Tech] */
        :root { 
            --bg: #050508; --card: #111116; 
            --accent: #00f2ff; /* ì´ì„±/ë¶„ì„ */
            --love: #ff0055;   /* ê°ì„±/ê²½ê³  */
            --kakao: #FEE500;  
            --text: #ffffff; --sub: #94a3b8; --border: #1a1a25; 
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; font-family: 'Pretendard', -apple-system, sans-serif; }
        body { 
            background: var(--bg); color: var(--text); line-height: 1.6; word-break: keep-all; 
            background-image: radial-gradient(circle at 50% 10%, rgba(0, 242, 255, 0.05) 0%, transparent 40%);
        }
        
        .app { max-width: 480px; margin: 0 auto; min-height: 100vh; display: none; flex-direction: column; background: rgba(5, 5, 8, 0.98); border-left: 1px solid var(--border); border-right: 1px solid var(--border); position: relative; animation: fadeIn 0.5s ease-out; }
        .app.active { display: flex !important; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Typography */
        header { text-align: center; padding: 40px 20px 20px; }
        .logo { font-size: 1.1rem; font-weight: 900; color: var(--accent); letter-spacing: 4px; margin-bottom: 10px; display: block; text-shadow: 0 0 10px rgba(0, 242, 255, 0.3); }
        h1 { font-size: 1.6rem; font-weight: 800; margin-bottom: 10px; background: linear-gradient(to right, #fff, #cbd5e1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .desc { font-size: 0.9rem; color: var(--sub); line-height: 1.6; margin-bottom: 30px; }

        /* [HAPTIC BUTTONS] ëª¨ë°”ì¼ ì«€ë“í•œ í„°ì¹˜ê° êµ¬í˜„ */
        .btn-kakao {
            background: var(--kakao); color: #000; border: none; width: 100%; padding: 18px; 
            font-size: 1rem; font-weight: 800; border-radius: 12px; cursor: pointer; 
            display: flex; align-items: center; justify-content: center; gap: 10px;
            box-shadow: 0 4px 15px rgba(254, 229, 0, 0.2); 
            transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1); 
        }
        .btn-kakao:active { transform: scale(0.96); opacity: 0.9; } 
        .btn-kakao::before { content: 'ğŸ’¬'; font-size: 1.2rem; }

        .btn-main { 
            background: var(--accent); color: #000; border: none; width: 100%; padding: 18px; 
            font-size: 1.1rem; font-weight: 800; border-radius: 12px; cursor: pointer; 
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); 
            transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 15px;
        }
        .btn-main:active { transform: scale(0.96); opacity: 0.9; }

        .btn-ghost {
            background: rgba(255,255,255,0.05); color: var(--accent); border: 1px solid rgba(0,242,255,0.3);
            width: 100%; padding: 15px; font-size: 0.95rem; font-weight: 700; border-radius: 12px; cursor: pointer;
            margin-bottom: 15px; transition: all 0.2s;
        }
        .btn-ghost:active { transform: scale(0.96); background: rgba(0,242,255,0.1); }

        /* [MODAL] 9ëŒ€ ë¶„ì„ ì›ë¦¬ íŒì—… */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); z-index: 999; display: none; 
            justify-content: center; align-items: end; 
        }
        .modal-overlay.open { display: flex; animation: fadeUp 0.3s ease-out; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .modal-content {
            background: #111; width: 100%; max-width: 480px; height: 85vh; 
            border-top-left-radius: 20px; border-top-right-radius: 20px; 
            padding: 30px 20px; overflow-y: auto; border-top: 2px solid var(--accent);
            box-shadow: 0 -10px 40px rgba(0, 242, 255, 0.1);
        }
        .tech-card { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #222; }
        .tech-badge { font-size: 0.7rem; color: #000; background: var(--accent); padding: 3px 8px; border-radius: 4px; font-weight: 800; display: inline-block; margin-bottom: 8px; }
        .tech-title { color: #fff; font-size: 1.1rem; font-weight: 700; margin-bottom: 5px; }
        .tech-desc { color: #bbb; font-size: 0.9rem; line-height: 1.6; }

        /* [REPORT UI] ê³ ì„ ëª… í…ìŠ¤íŠ¸ */
        .zone-box { margin-bottom: 25px; border: 1px solid var(--border); border-radius: 16px; padding: 20px; background: rgba(255,255,255,0.02); }
        .zone-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #222; }
        .z-title { font-weight: 800; font-size: 1rem; letter-spacing: 1px; }
        .green { color: var(--accent); text-shadow: 0 0 10px rgba(0,242,255,0.3); }
        .red { color: var(--love); text-shadow: 0 0 10px rgba(255,0,85,0.3); }
        
        .item-row { margin-bottom: 18px; }
        .item-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
        .item-keyword { font-size: 1rem; font-weight: 800; color: #ffffff; letter-spacing: -0.5px; } /* ë°ì€ í°ìƒ‰ */
        .thermo { font-size: 0.75rem; letter-spacing: 2px; }
        .t-high { color: var(--love); } .t-med { color: var(--accent); }
        
        .action-text { font-size: 0.95rem; color: #e2e8f0; margin-bottom: 10px; line-height: 1.5; font-weight: 400; }
        .msg-box { 
            background: #1e1e24; padding: 12px 15px; border-radius: 8px; 
            font-size: 0.95rem; color: #ffffff; border-left: 3px solid var(--accent); cursor: pointer; 
            font-weight: 500; letter-spacing: 0.3px;
        }
        .msg-box:active { background: #333; transform: scale(0.98); }

        /* [SURVEY UI] */
        .opt-btn { 
            width: 100%; padding: 18px; margin-bottom: 10px; background: #111116; border: 1px solid var(--border); 
            color: #e2e8f0; border-radius: 12px; text-align: left; transition: transform 0.1s; 
            font-size: 1rem;
        }
        .opt-btn:active { background: var(--accent); color: #000; font-weight: 800; transform: scale(0.96); }
        .progress-bar { height: 3px; background: #111; width: 100%; }
        .progress-fill { height: 100%; background: var(--accent); width: 0%; transition: width 0.3s; }

    </style>
</head>
<body>

<div id="techModal" class="modal-overlay">
    <div class="modal-content">
        <div style="text-align:center; margin-bottom:30px;">
            <span class="logo">SYNAPSE ON</span>
            <h2 style="color:#fff;">9-CORE ANALYSIS ENGINE</h2>
            <p style="color:var(--sub); font-size:0.8rem;">9í•´(å“) 3132ê²½ì˜ í™•ë¥ ì„ ëš«ëŠ” ì •ë°€ ë¶„ì„</p>
        </div>
        
        <div class="tech-card">
            <span class="tech-badge">DATA MINING</span>
            <div class="tech-title">1. ë§ˆì´í¬ë¡œ ë ˆì´í„´ì‹œ ì¶”ì </div>
            <p class="tech-desc">ë§ì€ ê¾¸ë©°ë‚¼ ìˆ˜ ìˆì§€ë§Œ, ë°˜ì‘ ì†ë„ëŠ” ê±°ì§“ë§ì„ ëª» í•©ë‹ˆë‹¤. 0.001ì´ˆ ë‹¨ìœ„ì˜ ì‘ë‹µ ì§€ì—° ì‹œê°„ì„ ì¸¡ì •í•˜ì—¬ ë¬´ì˜ì‹ì  ê°ˆë“± êµ¬ê°„ê³¼ íŠ¸ë¼ìš°ë§ˆ í¬ì¸íŠ¸ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.</p>
        </div>
        <div class="tech-card">
            <span class="tech-badge">SENSOR</span>
            <div class="tech-title">2. ê°ê° ìš°íšŒ ì„¤ê³„</div>
            <p class="tech-desc">ì‚¬íšŒì  ê°€ë©´(Persona)ì„ ë¬´ë ¥í™”í•˜ê¸° ìœ„í•´ ì§ì ‘ì ì¸ ì§ˆë¬¸ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¹›, ì†Œë¦¬, ê³µê°„ì— ëŒ€í•œ 30ê°€ì§€ ì¶”ìƒ ìê·¹ì„ í†µí•´ ë³¸ëŠ¥ì  ê¸°ì§ˆì„ ì¶”ì¶œí•©ë‹ˆë‹¤.</p>
        </div>
        <div class="tech-card">
            <span class="tech-badge">ALGORITHM</span>
            <div class="tech-title">3. ë™ì  ì¡°ë¦½ ì—”ì§„ (Dynamic Assembly)</div>
            <p class="tech-desc">ê³ ì •ëœ ìœ í˜•(Type)ì€ ì—†ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì„ íƒ í•˜ë‚˜í•˜ë‚˜ê°€ ìœ ì „ìê°€ ë˜ì–´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¡°ë¦½ë©ë‹ˆë‹¤. ì „ ì„¸ê³„ ì¸êµ¬ ì¤‘ ë‹¹ì‹ ê³¼ ë˜‘ê°™ì€ ê²°ê³¼ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
            <div style="background:#000; padding:10px; font-size:0.7rem; color:#666; margin-top:5px; border-radius:5px;">$$ UniqueID = \sum_{i=1}^{30} Hash(Choice_i \times Latency_i) $$</div>
        </div>
        <div class="tech-card">
            <span class="tech-badge">NEUROSCIENCE</span>
            <div class="tech-title">4. ë‹¤ë¯¸ì£¼ ì‹ ê²½ ì´ë¡ </div>
            <p class="tech-desc">ìƒëŒ€ì˜ ì‹ ê²½ê³„ê°€ ì–¸ì œ 'ì•ˆì „'í•˜ê³  ì–¸ì œ 'ë™ê²°'ë˜ëŠ”ì§€ ë¶„ì„í•˜ì—¬, ì‹ ê²½ì„ ì•ˆì •ì‹œí‚¤ëŠ” êµ¬ì²´ì ì¸ í–‰ë™(ëª©ì†Œë¦¬ í†¤, ìŠ¤í‚¨ì‹­)ì„ ì²˜ë°©í•©ë‹ˆë‹¤.</p>
        </div>
        <div class="tech-card">
            <span class="tech-badge">PSYCHOLOGY</span>
            <div class="tech-title">5. í”„ë¡ì„¸ë¯¹ìŠ¤ ê³µê°„í•™</div>
            <p class="tech-desc">ì‹¬ë¦¬ì  ì•ˆì „ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ì—¬ ìµœì ì˜ ë¬¼ë¦¬ì  ìœ„ì¹˜(ì•ìë¦¬, ì˜†ìë¦¬, 90ë„ ë“±)ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.</p>
        </div>
         <div class="tech-card">
            <span class="tech-badge">BEHAVIOR</span>
            <div class="tech-title">6. ìê¸° ê²°ì •ì„± ì´ë¡ </div>
            <p class="tech-desc">í†µì œ ìš•êµ¬ê°€ ê°•í•œ ìœ í˜•ì—ê²Œ ê±°ë¶€ê° ì—†ì´ ì›í•˜ëŠ” ê²ƒì„ ì–»ì–´ë‚´ëŠ” 'ì„ íƒ ì„¤ê³„ í™”ë²•'ì„ ì ìš©í•©ë‹ˆë‹¤.</p>
        </div>
         <div class="tech-card">
            <span class="tech-badge">CHRONO</span>
            <div class="tech-title">7. ì‹œê°„ ì‹¬ë¦¬í•™</div>
            <p class="tech-desc">ìƒëŒ€ë°©ì˜ ë°©ì–´ê¸°ì œê°€ ê°€ì¥ ì•½í•´ì§€ëŠ” ê³¨ë“  íƒ€ì„ê³¼ ì ˆëŒ€ ê±´ë“œë¦¬ë©´ ì•ˆ ë˜ëŠ” ë ˆë“œ íƒ€ì„ì„ ë¶„ì„í•©ë‹ˆë‹¤.</p>
        </div>
         <div class="tech-card">
            <span class="tech-badge">OUTPUT</span>
            <div class="tech-title">8. ì–‘ë©´ 5-5-5 í”„ë¡œí† ì½œ</div>
            <p class="tech-desc">ì‚¬ë‘ì„ ì±„ìš°ëŠ” ê³µëµ(Green)ê³¼ ìƒì²˜ë¥¼ ì£¼ëŠ” ê¸ˆê¸°(Red)ë¥¼ ì™„ë²½í•˜ê²Œ ëŒ€ì¹­ì‹œì¼œ ì œê³µí•©ë‹ˆë‹¤.</p>
        </div>
         <div class="tech-card" style="border-bottom:none;">
            <span class="tech-badge">VISUAL</span>
            <div class="tech-title">9. ì¤‘ìš”ë„ ì˜¨ë„ê³„</div>
            <p class="tech-desc">ê´€ê³„ ìƒì¡´ì— ì¹˜ëª…ì ì¸ ìš”ì†Œì—ëŠ” ë¶‰ì€ìƒ‰ ê²Œì´ì§€ë¥¼ ë¶€ì°©í•˜ì—¬ ì‹œê°ì  ê²½ê°ì‹¬ì„ ì¤ë‹ˆë‹¤.</p>
        </div>
        
        <button class="btn-main" onclick="toggleModal(false)">ë¶„ì„ ì›ë¦¬ í™•ì¸ ì™„ë£Œ (ë‹«ê¸°)</button>
    </div>
</div>

<div class="app" id="v-landing">
    <header>
        <span class="logo">SYNAPSE ON</span>
        <h1>ì‚¬ë‘ì—ë„<br>ë²ˆì—­ê¸°ê°€ í•„ìš”í•©ë‹ˆë‹¤</h1>
        <p class="desc">ì˜¤í•´í•˜ì§€ ì•Šê³ , ìƒì²˜ ì£¼ì§€ ì•Šê³ <br>ì„œë¡œë¥¼ ê°€ì¥ ê¹Šì´ ì•„ê»´ì£¼ëŠ” ê³¼í•™ì  ë°©ë²•</p>
    </header>

    <div style="padding: 0 20px 40px;">
        <button class="btn-ghost" onclick="toggleModal(true)">ğŸ”¬ SY-ON 9ëŒ€ ë¶„ì„ ì›ë¦¬ ë³´ê¸°</button>
        <div style="height:20px;"></div>
        <button class="btn-main" style="background:#fff; color:#000;" onclick="alert('í˜„ì¬ ë² íƒ€ ê¸°ê°„ìœ¼ë¡œ ë¬´ë£Œ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.')">í”„ë¦¬ë¯¸ì—„ ë¦¬í¬íŠ¸ êµ¬ë§¤í•˜ê¸°</button>
        <button class="btn-main" onclick="go('v-buyer-init')">ì´ë¯¸ êµ¬ë§¤í•˜ì…¨ë‚˜ìš”? (ì‹œì‘í•˜ê¸°)</button>
    </div>
</div>

<div class="app" id="v-buyer-init">
    <header>
        <span class="logo">INVITATION</span>
        <h1>ì†Œì¤‘í•œ ì‚¬ëŒì„<br>ì´ˆëŒ€í•´ ì£¼ì„¸ìš”</h1>
        <p class="desc">ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ íŒŒíŠ¸ë„ˆì—ê²Œ<br>ì´ˆëŒ€ì¥ì„ ë³´ë‚´ì„¸ìš”.</p>
    </header>
    <div style="padding: 20px;">
        <div style="background:#111; padding:20px; border-radius:12px; text-align:center; margin-bottom:20px; color:#fff;">
            ğŸ« <b>ì´ˆëŒ€ ë§í¬ ìƒì„± ì™„ë£Œ</b><br>
            <span style="font-size:0.8rem; color:var(--sub);">ìƒëŒ€ë°©ì€ ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ì—†ìœ¼ë©°,<br>ë°ì´í„°ëŠ” ì•”í˜¸í™”ë˜ì–´ ë‹¹ì‹ ì—ê²Œë§Œ ë„ì°©í•©ë‹ˆë‹¤.</span>
        </div>
        <button class="btn-kakao" onclick="copyInvite()">ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ì´ˆëŒ€ì¥ ë³´ë‚´ê¸°</button>
    </div>
</div>

<div class="app" id="v-guest">
    <header>
        <span class="logo">DEEP LOVE</span>
        <h1>ë‹¹ì‹ ì„ ë” ê¹Šì´ ì‚¬ë‘í•˜ê¸° ìœ„í•œ<br>ì§ˆë¬¸ì…ë‹ˆë‹¤.</h1>
        <p class="desc">ì •ë‹µì€ ì—†ìŠµë‹ˆë‹¤.<br>ë‹¹ì‹ ì˜ ê°ê°ì´ ì´ë„ëŠ” ëŒ€ë¡œ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
    </header>
    <div style="padding: 20px;">
        <button class="btn-main" onclick="startSurvey()">ì§ˆë¬¸ ì‹œì‘í•˜ê¸°</button>
    </div>
</div>

<div class="app" id="v-survey">
    <div class="progress-bar"><div class="progress-fill" id="p-fill"></div></div>
    <div style="padding: 30px 20px; flex: 1; display: flex; flex-direction: column; justify-content: center;">
        <div id="q-num" style="color:var(--accent); font-weight:800; font-size:0.9rem; margin-bottom:20px;">QUESTION 01</div>
        <div id="q-text" style="font-size:1.4rem; font-weight:700; margin-bottom:40px; color:#fff; line-height:1.4;"></div>
        <div id="opt-box"></div>
    </div>
    <div style="padding:20px; text-align:center;">
        <button onclick="prevQ()" style="background:none; border:none; color:var(--sub); text-decoration:underline; cursor:pointer;">&lt; ì´ì „ìœ¼ë¡œ</button>
    </div>
</div>

<div class="app" id="v-seal">
    <div style="flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center; padding:20px; text-align:center;">
        <div style="font-size:3rem; margin-bottom:20px;">ğŸ’Œ</div>
        <h2>ë§ˆìŒì´ ë´‰ì¸ë˜ì—ˆìŠµë‹ˆë‹¤</h2>
        <p class="desc" style="margin-top:10px;">
            ì†”ì§í•œ ë‹µë³€ ê°ì‚¬í•©ë‹ˆë‹¤.<br>
            ì´ ë°ì´í„°ëŠ” ì˜¤ì§ ë‹¹ì‹ ì„ ì•„ê»´ì¤„<br>
            ë‹¨ í•œ ì‚¬ëŒì—ê²Œë§Œ ì „ë‹¬ë©ë‹ˆë‹¤.
        </p>
        <div id="key-area" style="width:100%; display:none; animation:fadeIn 1s;">
            <button class="btn-kakao" onclick="sendKey()">ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê²°ê³¼ ë³´ë‚´ê¸°</button>
        </div>
    </div>
</div>

<div class="app" id="v-report">
    <header style="padding-bottom:10px;">
        <span class="logo">LOVE REPORT</span>
        <h1>ìƒëŒ€ë°© ì‚¬ìš© ì„¤ëª…ì„œ</h1>
    </header>
    
    <div style="padding: 20px;">
        <div style="text-align:center; font-family:monospace; color:var(--sub); font-size:0.7rem; margin-bottom:20px;">
            DNA-CODE: <span id="soul-id" style="color:var(--accent);">GENERATING...</span>
        </div>

        <div style="position:relative; height:260px; margin-bottom:10px;">
            <canvas id="radarChart"></canvas>
        </div>
        <p style="text-align:center; color:var(--accent); font-size:0.9rem; margin-bottom:30px; font-weight:700;">
            CORE TYPE: <span id="type-name">ë¶„ì„ ì¤‘...</span>
        </p>

        <div class="zone-box" style="border-color:var(--accent);">
            <div class="zone-header">
                <span class="z-title green">ğŸŸ¢ ì‚¬ë‘ì„ ì±„ìš°ëŠ” ë²• (Green)</span>
            </div>
            <div id="green-list"></div>
        </div>

        <div class="zone-box" style="border-color:var(--love);">
            <div class="zone-header">
                <span class="z-title red">ğŸ”´ ìƒì²˜ë¥¼ ë§‰ëŠ” ë²• (Red)</span>
            </div>
            <div id="red-list"></div>
        </div>

        <div style="border:1px solid var(--love); background:rgba(255,0,85,0.05); padding:15px; border-radius:12px;">
            <div style="color:var(--love); font-weight:700; font-size:0.9rem; margin-bottom:5px;">âš¡ ìˆ¨ê²¨ì§„ ë§ˆìŒ (Latency Tracker)</div>
            <p id="latency-msg" style="color:#ffcccc; font-size:0.9rem;"></p>
        </div>
        
        <div style="height:50px;"></div>
    </div>
</div>

<script>
    // --- [SYSTEM] Modal Control ---
    function toggleModal(show) {
        const m = document.getElementById('techModal');
        if(show) { m.classList.add('open'); document.body.style.overflow = 'hidden'; if(window.MathJax) MathJax.typesetPromise(); }
        else { m.classList.remove('open'); document.body.style.overflow = 'auto'; }
    }

    // --- [DATA] Questions (30 items) ---
    // ì˜ì¥ë‹˜ì´ ì£¼ì‹  30ê°œ ë¬¸í•­ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•©ë‹ˆë‹¤. (ìˆ˜ì • ê¸ˆì§€)
    const questions = [
        "1. ë‚¯ì„  ì¥ì†Œì—ì„œ ë‹¹ì‹ ì˜ ê°ê°ì´ ê°€ì¥ ë¨¼ì € ë°˜ì‘í•˜ëŠ” ìš”ì†ŒëŠ” ë¬´ì—‡ì¸ê°€ìš”?", "2. ì¡°ìš©í•œ ì¹´í˜ì—ì„œ ë³¸ëŠ¥ì ìœ¼ë¡œ ë‹¹ì‹ ì˜ ë°œê±¸ìŒì´ í–¥í•˜ëŠ” ê³³ì€ ì–´ë””ì¸ê°€ìš”?", 
        "3. ì˜í™”ë¥¼ ê´€ëŒí•  ë•Œ, ë‹¹ì‹ ì˜ ëª°ì…ì„ ë°©í•´í•˜ëŠ” ê°€ì¥ í° ìš”ì†ŒëŠ” ë¬´ì—‡ì¸ê°€ìš”?", "4. ê³ ëœ í•˜ë£¨ë¥¼ ë§ˆì¹œ í›„, í˜„ê´€ë¬¸ ì•ì— ì„°ì„ ë•Œ ê°€ì¥ ë¨¼ì € ë“œëŠ” ìƒê°ì€?", 
        "5. í•˜ë£¨ ì¤‘ ì‹œê°„ì´ ê°€ì¥ ëŠë¦¬ê²Œ íë¥¸ë‹¤ê³  ëŠë¼ëŠ” ìˆœê°„ì€ ì–¸ì œì¸ê°€ìš”?", "6. ë¹„ ë‚´ë¦¬ëŠ” ì°½ë°–ì„ ë³¼ ë•Œ, ë‹¹ì‹ ì˜ ì‹œì„ ì´ ê°€ì¥ ì˜¤ë˜ ë¨¸ë¬´ëŠ” ê³³ì€?", 
        "7. ì•„ì£¼ ì§€ì¹œ ë‚ , ë‹¹ì‹ ì˜ ë‡Œê°€ ê°€ì¥ ê°„ì ˆíˆ ì›í•˜ëŠ” ê°ê°ì  ì‹ í˜¸ëŠ”?", "8. ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì•½ì† ì·¨ì†Œ ì†Œì‹ì„ ë“¤ì—ˆì„ ë•Œ, ë‹¹ì‹ ì˜ ì²« ê°ì •ì€ ë¬´ì—‡ì¸ê°€ìš”?", 
        "9. ì„œì ì—ì„œ ë‹¹ì‹ ì˜ ë°œê±¸ìŒì´ ê°€ì¥ ì˜¤ë˜ ë©ˆì¶”ëŠ” ì½”ë„ˆëŠ” ì–´ë””ì¸ê°€ìš”?", "10. ë‹¹ì‹ ì˜ ë°©ì— ë‹¨ í•˜ë‚˜ì˜ ê·¸ë¦¼ì„ ê±¸ ìˆ˜ ìˆë‹¤ë©´ ë¬´ì—‡ì„ ê³ ë¥¼ê¹Œìš”?", 
        "11. ì—˜ë¦¬ë² ì´í„°ì— ëª¨ë¥´ëŠ” ì‚¬ëŒê³¼ íƒ”ì„ ë•Œ, ë‹¹ì‹ ì˜ ì‹œì„ ì€ ì£¼ë¡œ ì–´ë””ì— ë¨¸ë¬´ë‚˜ìš”?", "12. ëˆ„êµ°ê°€ ë‹¹ì‹ ì—ê²Œ ë¬´ë¦¬í•œ ë¶€íƒì„ í–ˆì„ ë•Œ, ë‹¹ì‹ ì˜ ë§ˆìŒì—ì„œ ì¼ì–´ë‚˜ëŠ” ì²« ë°˜ì‘ì€?", 
        "13. ê°€ìƒì˜ ê°€ë©´ë¬´ë„íšŒì— ê°„ë‹¤ë©´, ë‹¹ì‹ ì´ ì“°ê³  ì‹¶ì€ ê°€ë©´ì˜ ì¬ì§ˆì€?", "14. ì‚°ì±… ì¤‘ ê°ˆë¦¼ê¸¸ì´ ë‚˜ì™”ì„ ë•Œ, ë‹¹ì‹ ì˜ ë°œê±¸ìŒì€ ì–´ë””ë¡œ í–¥í•˜ë‚˜ìš”?", 
        "15. ì£¼ë¬¸í•œ ìŒë£Œê°€ ì˜ëª» ë‚˜ì™”ì„ ë•Œ, ë‹¹ì‹ ì˜ ì²« ëŒ€ì‘ì€ ë¬´ì—‡ì¸ê°€ìš”?", "16. ì™„ë²½í•œ íœ´ì‹ì„ ì·¨í•˜ê³  ìˆëŠ” ë‹¹ì‹ ì˜ ë°©, ì¡°ëª…ì€ ì–´ë–¤ ìƒíƒœì¸ê°€ìš”?", 
        "17. ì˜¤ë˜ëœ ì¼ê¸°ì¥ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì´ ê°€ì¥ ë¨¼ì € ì°¾ì•„ë³¼ í˜ì´ì§€ëŠ” ì–´ë””ì¸ê°€ìš”?", "18. ëˆ„êµ°ê°€ ë‹¹ì‹ ì˜ ë¹„ë°€ì„ ì•Œê³  ìˆë‹¤ê³  ì†ì‚­ì¸ë‹¤ë©´, ë‹¹ì‹ ì˜ ë°˜ì‘ì€?", 
        "19. ë‹¹ì‹ ì˜ ì±…ìƒ ìœ„ì— ë†“ì¸ ë¬¼ê±´ë“¤ì˜ ì •ëˆ ìƒíƒœëŠ” ë³´í†µ ì–´ë– í•œê°€ìš”?", "20. ì¶•í•˜ë°›ì„ ì¼ì´ ìƒê²¼ì„ ë•Œ, ë‹¹ì‹ ì´ ê°€ì¥ ì›í•˜ëŠ” ì¶•í•˜ì˜ ë°©ì‹ì€?", 
        "21. ê¸¸ê°€ì— í•€ ê½ƒì„ ë³´ì•˜ì„ ë•Œ, ë‹¹ì‹ ì˜ ë¨¸ë¦¿ì†ì— ê°€ì¥ ë¨¼ì € ë“œëŠ” ìƒê°ì€?", "22. ì˜ˆìƒì¹˜ ëª»í•œ ë³´ë„ˆìŠ¤ê°€ ìƒê²¼ë‹¤ë©´, ë‹¹ì‹ ì€ ì–´ë””ì— ë¨¼ì € ì“°ê³  ì‹¶ë‚˜ìš”?", 
        "23. ë‹¹ì‹ ì—ê²Œ 'ê°€ì¥ í¸ì•ˆí•œ ì‹ ë°œ'ì€ ì–´ë–¤ ëŠë‚Œì¸ê°€ìš”?", "24. ëˆ„êµ°ê°€ ë‹¹ì‹ ì˜ ê°€ì¹˜ê´€ì„ ë¹„íŒí•œë‹¤ë©´ ì–´ë–»ê²Œ ëŒ€ì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?", 
        "25. ê°€ë°© ì†ì— ì ˆëŒ€ ë¹ ì§€ë©´ ì•ˆ ë˜ëŠ” ë¬¼ê±´ í•˜ë‚˜ë¥¼ ê³ ë¥¸ë‹¤ë©´?", "26. ê±°ìš¸ ì†ì— ë¹„ì¹œ ìì‹ ì˜ ëª¨ìŠµ ì¤‘ ê°€ì¥ ë§ˆìŒì— ë“œëŠ” ë¶€ë¶„ì€?", 
        "27. ë‹¹ì‹ ì´ ê°€ì¥ ê²¬ë””ê¸° í˜ë“  ì¹¨ë¬µì˜ ì¥ì†ŒëŠ” ì–´ë””ì¸ê°€ìš”?", "28. ë‹¹ì‹ ì—ê²Œ 'ì„±ê³µ'ì´ë€ ì–´ë–¤ ì´ë¯¸ì§€ì— ê°€ì¥ ê°€ê¹ë‚˜ìš”?", 
        "29. íƒ€ì¸ê³¼ì˜ ëŒ€í™”ì—ì„œ ë‹¹ì‹ ì´ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ê°€ì¹˜ëŠ”?", "30. ë§ˆì§€ë§‰ í•´ë‹µ, ë‹¹ì‹ ì˜ ì˜í˜¼ì„ ì§€í‚¤ëŠ” 'ë§ˆìŠ¤í„° í‚¤'ëŠ” ì–´ë–¤ ëª¨ì–‘ì¼ê¹Œìš”?"
    ];
    // ì„ íƒì§€ ë°°ì—´ (ì›ë³¸ ìœ ì§€)
    const optsArr = [
        ["ê³µê°„ì˜ ì˜¨ë„", "ë¹›ì˜ ë°ê¸°", "ì£¼ë³€ì˜ ì†ŒìŒ", "ê³µê°„ì˜ ëƒ„ìƒˆ", "ì‚¬ë¬¼ì˜ ì§ˆì„œ"], ["ë²½ ë“±ì§„ êµ¬ì„", "ì°½ê°€ ìë¦¬", "ì¤‘ì•™ í…Œì´ë¸”", "ì–´ë‘ìš´ ì•ˆìª½", "ì¶œì…êµ¬ ê·¼ì²˜"], 
        ["ì˜† ì‚¬ëŒì˜ ì†ŒìŒ", "í™”ë©´ì˜ ë²ˆì©ì„", "ë‹µë‹µí•œ ê³µê¸°", "ì§€ë£¨í•œ ì„œì‚¬", "ì˜ìì˜ ë¶ˆí¸í•¨"], ["ì•„ë¬´ë„ ì—†ëŠ” ì •ì ", "ëˆ„êµ°ê°€ì˜ í™˜ëŒ€", "ë‚´ì¼ì˜ ë‚¨ì€ ì¼", "ë§›ìˆëŠ” ìŒì‹", "ì¹¨ëŒ€ì— ëˆ•ëŠ” ìƒìƒ"], 
        ["ì˜¤ì „ 11ì‹œê²½", "ì˜¤í›„ 2ì‹œê²½", "ì˜¤í›„ 5ì‹œ 15ë¶„ê²½", "ë°¤ 9ì‹œê²½", "ìƒˆë²½ 2ì‹œê²½"], ["ë¬¼ë°©ìš¸", "ì‚¬ëŒë“¤", "ìƒ‰ê°", "êµ¬ë¦„", "ë¹—ì†Œë¦¬"], 
        ["ê·œì¹™ì ì¸ ìì—° ì†Œë¦¬", "ì™„ë²½ ì •ì ", "ì”ì”í•œ ìŒì•…", "ì±… ì½ëŠ” ì†Œë¦¬", "ë°±ìƒ‰ ì†ŒìŒ"], ["í•´ë°©ê°", "í—ˆì „í•¨", "ì„œìš´í•¨", "ì••ë°•ê°", "ì„¤ë ˜"], 
        ["ì‹¤ìš©ì„œ", "ì—ì„¸ì´", "ì†Œì„¤", "ì—­ì‚¬ì„œ", "ì˜ˆìˆ ì„œ"], ["ì‚¬ë§‰ í’ê²½", "ë„ì‹¬ ì•¼ê²½", "ìˆ²ì† ì˜¤ë‘ë§‰", "ì¶”ìƒí™”", "ì‹¬ì—° ë°”ë‹¤"], 
        ["ì¸µìˆ˜ í‘œì‹œíŒ", "ë¬¸ì— ë¹„ì¹œ ë‚´ ëª¨ìŠµ", "ë°”ë‹¥ì˜ í ì§‘", "íœ´ëŒ€í° í™”ë©´", "ë²½ë©´ ê´‘ê³ íŒ"], ["ê±°ì ˆ ë°©ë²• ê³ ë¯¼", "ë³¸ëŠ¥ì ì¸ ì§œì¦", "ì´ë“ê³¼ ì‹¤ ê³„ì‚°", "ì¼ë‹¨ ìˆ˜ë½ í›„ í›„íšŒ", "ë‚˜ì•½í•¨ ìì±…"], 
        ["ë‹¨ë‹¨í•œ ê¸ˆì†", "ë¶€ë“œëŸ¬ìš´ ê°€ì£½", "í™”ë ¤í•œ ê¹ƒí„¸", "ë¬´í‘œì •í•œ ë„ìê¸°", "ë¹„ì¹˜ëŠ” ë ˆì´ìŠ¤"], ["ì•ˆì „í•œ ë„“ì€ ê¸¸", "í’ê²½ì´ ì˜ˆìœ ê¸¸", "ìƒˆë¡œìš´ ê¸¸", "ê°€ì¥ ë¹ ë¥¸ ê¸¸", "í–¥ê¸°ë¡œìš´ ê¸¸"], 
        ["ê·¸ëƒ¥ ë§ˆì‹ ë‹¤", "ì •ì¤‘íˆ ì¬ìš”ì²­", "ì°¸ë‹¤ê°€ í›„íšŒ", "ë¶ˆì¾Œí•¨ í‘œì¶œ", "ëŒ€ì‹  ë§í•´ë‹¬ë¼ ë¶€íƒ"], ["í™˜í•œ í˜•ê´‘ë“±", "ì£¼í™©ë¹› ìŠ¤íƒ ë“œ", "ìì—°ê´‘", "ì€ì€í•œ ì´›ë¶ˆ", "ì°¨ê°€ìš´ ëª¨ë‹ˆí„° ë¹›"], 
        ["ê°€ì¥ í–‰ë³µí–ˆë˜ ìˆœê°„", "ê°€ì¥ ìŠ¬íë˜ ê³ ë°±", "ë‚˜ ìì‹ ì—ê²Œ ì“´ ë‹¤ì§", "ì—°ì¸ê³¼ì˜ ì¶”ì–µ", "ìˆœì„œëŒ€ë¡œ"], ["ê·¹ì‹¬í•œ ë¶ˆì•ˆ", "ë°©ì–´ì  íƒœë„", "ëƒ‰ì •í•œ ë¶„ì„", "í‰íŒ ê±±ì •", "ë†ë‹´ìœ¼ë¡œ íšŒí”¼"], 
        ["ì™„ë²½í•œ ì •ëˆ", "ë‚˜ë§Œì˜ ê·œì¹™", "í˜¼ë€ ìƒíƒœ", "ë¯¸ë‹ˆë©€ ìƒíƒœ", "ì¥ì‹ ê°€ë“"], ["í™”ë ¤í•œ ë°•ìˆ˜", "ì¡°ìš©í•œ ì‹ì‚¬", "ì •ì„±ìŠ¤ëŸ° í¸ì§€", "ì‹¤ì§ˆì ì¸ ì„ ë¬¼", "ë”°ëœ»í•œ í¬ì˜¹"], 
        ["ìˆœìˆ˜í•œ ê°íƒ„", "ì´ë¦„ í˜¸ê¸°ì‹¬", "ì‹œë“¤ ê²ƒì— ëŒ€í•œ ìŠ¬í””", "ì„ ë¬¼ ë°›ê³  ì‹¶ì€ ë§˜", "ë¬´ë¤ë¤í•œ ì¸ì‹"], ["ê³ ê°€ì˜ ë¬¼ê±´", "ì§€ì¸ê³¼ì˜ ì‹ì‚¬", "ë¯¸ë˜ë¥¼ ìœ„í•œ ì €ì¶•", "ìê¸° ê³„ë°œ íˆ¬ì", "íŠ¹ë³„í•œ ê²½í—˜"], 
        ["ë‹¨ë‹¨í•œ ìš´ë™í™”", "ê°€ë²¼ìš´ ìŠ¬ë¦¬í¼", "ì ë‹¹í•œ ë¡œí¼", "ìì‹ ê°ì˜ êµ¬ë‘", "ì§€ë©´ ì²´ê° ì‹ ë°œ"], ["ë…¼ë¦¬ì  ë°˜ë°•", "ê²‰ìœ¼ë¡œë§Œ ìˆ˜ê¸", "ìƒì²˜ë°›ê³  ì°¨ë‹¨", "ëê¹Œì§€ ì¶”ê¶", "ë¬´ê´€ì‹¬í•œ íšŒí”¼"], 
        ["ì´ì–´í°", "ìˆ˜ì²©ê³¼ íœ", "ë¯¼íŠ¸ë‚˜ ê»Œ", "ë¹„ìƒê¸ˆ", "í–¥ìˆ˜ë‚˜ ë¦½ë°¤"], ["êµ³ê²Œ ë‹«íŒ ì…ë§¤", "ê¹Šì€ ëˆˆë™ì", "ë‹¨ì •í•œ ì‹¤ë£¨ì—£", "ì‹ ë¢°ë¥¼ ì£¼ëŠ” ì¸ìƒ", "ë§ˆìŒì— ë“œëŠ” ê³³ ì—†ìŒ"], 
        ["ë‚¯ì„  ì—˜ë¦¬ë² ì´í„°", "í™”ë‚œ ì—°ì¸ê³¼ì˜ ì°¨", "ë©´ì ‘ì¥ ëŒ€ê¸°ì‹¤", "ì¡°ìš©í•œ ë„ì„œê´€", "ë°¤ì˜ ê³¨ëª©ê¸¸"], ["ë†’ì€ í’ê²½", "ë”°ëœ»í•œ ì €ë… ì‹ì‚¬", "ê°„ì„­ ì—†ëŠ” ê³µê°„", "ë„ì›€ì„ ì£¼ëŠ” ê°ì‚¬", "ëì—†ëŠ” ì„±ì¥ ê³¼ì •"], 
        ["ëª…í™•í•œ ê²°ë¡ ", "ê¹Šì€ ì •ì„œì  êµê°", "ì˜ˆì˜ì™€ ê²©ì‹", "ì†”ì§í•œ ì†ë§ˆìŒ", "ì¹¨ë¬µì˜ í¸ì•ˆí•¨"], ["ì •êµí•œ ê¸ˆì—´ì‡ ", "ë¬´ê±°ìš´ ë¬´ì‡ ì—´ì‡ ", "ë°˜ì§ì´ëŠ” ìˆ˜ì •", "í˜•íƒœ ì—†ëŠ” ë¹›", "ë””ì§€í„¸ ë³´ì•ˆí‚¤"]
    ];

    // --- [LOGIC] Dynamic Assembly Engine (ë™ì  ì¡°ë¦½ ì—”ì§„) ---
    // ê° ì§ˆë¬¸(Index)ì˜ íŠ¹ì • ë‹µë³€(Choice Index)ì— ë”°ë¼ ë§¤í•‘ë˜ëŠ” ì¡°ì–¸ ë°ì´í„°ë² ì´ìŠ¤
    // ì´ ë°©ì‹ì€ ìœ í˜•(Type)ì´ ì•„ë‹ˆë¼ 'ìœ ì „ì(Answer)' ë‹¨ìœ„ë¡œ ê²°ê³¼ë¥¼ ì¡°ë¦½í•©ë‹ˆë‹¤.
    const adviceMap = {
        // Q1 (ê°ê°): 0=ì˜¨ë„, 1=ë¹›, 2=ì†ŒìŒ, 3=ëƒ„ìƒˆ, 4=ì§ˆì„œ
        0: {
            0: { type:'green', k:'ì˜¨ë„ì¡°ì ˆ', g:'â–®â–®â–®â–®â–®', act:'ë§Œë‚˜ìë§ˆì ì‹¤ë‚´ ì˜¨ë„ê°€ ì ë‹¹í•œì§€ ë¬¼ì–´ë´ ì£¼ì„¸ìš”.', msg:'ì—¬ê¸° ì˜¨ë„ ê´œì°®ì•„? ì¶¥ì§€ ì•Šì•„?' },
            2: { type:'red', k:'ì†ŒìŒê³µê²©', g:'â–®â–®â–®â–®â–®', act:'ì‹œë„ëŸ¬ìš´ ê³³ì— ë°ë ¤ê°€ì§€ ë§ˆì„¸ìš”. ì†ŒìŒì€ ê·¸ì—ê²Œ ê³ ë¬¸ì…ë‹ˆë‹¤.', msg:'(í° ì†Œë¦¬ë¡œ) ì•¼!! ì˜ ë“¤ì–´ë´!!' }
        },
        // Q2 (ê³µê°„): 0=ë“±ì§(ì•ˆì „), 1=ì°½ê°€(ê°œë°©), 3=ì•ˆìª½(ì€ë‘”), 4=ì…êµ¬(ë¶ˆì•ˆ)
        1: {
            0: { type:'green', k:'ì•ˆì „ê¸°ì§€', g:'â–®â–®â–®â–®â–®', act:'ì‹ë‹¹ì—ì„œëŠ” ë¬´ì¡°ê±´ ë²½ì„ ë“±ì§„ êµ¬ì„ ìë¦¬ì— ì•‰íˆì„¸ìš”.', msg:'ì•ˆìª½ ì¡°ìš©í•œ ìë¦¬ë¡œ ì¡ì•˜ì–´.' },
            4: { type:'red', k:'í†µë¡œì¢Œì„', g:'â–®â–®â–®â–®â–®', act:'ì‚¬ëŒë“¤ì´ ì¹˜ê³  ë‹¤ë‹ˆëŠ” í†µë¡œ ìª½ì— ì•‰íˆì§€ ë§ˆì„¸ìš”.', msg:'ìë¦¬ ì—†ëŠ”ë° ê·¸ëƒ¥ ì—¬ê¸° ì•‰ì.' }
        },
        // Q4 (ê·€ê°€): 0=ì •ì , 1=í™˜ëŒ€, 2=ì¼
        3: {
            0: { type:'green', k:'íˆ¬ëª…ì¸ê°„', g:'â–®â–®â–®â–®â–®', act:'ê·€ê°€ í›„ 15ë¶„ì€ ë§ì„ ê±¸ì§€ ë§ê³  ê°€ë§Œíˆ ë‘ì„¸ìš”.', msg:'(ëˆˆì¸ì‚¬ë§Œ í•˜ê³  ë¬¼ ê±´ë„¤ê¸°)' },
            1: { type:'red', k:'ì¬ì´‰', g:'â–®â–®â–®â–®â–¯', act:'ì§‘ì— ì˜¤ìë§ˆì ì´ê²ƒì €ê²ƒ ë¬»ê±°ë‚˜ ì‹œí‚¤ì§€ ë§ˆì„¸ìš”.', msg:'ì˜¤ìë§ˆì ëˆ„ì›Œìˆê²Œ? ì˜· ì•ˆ ê°ˆì•„ì…ì–´?' }
        },
        // Q8 (ì•½ì† ì·¨ì†Œ): 0=í•´ë°©, 1=í—ˆì „, 2=ì„œìš´, 3=ì••ë°•
        7: {
            0: { type:'green', k:'í˜¼ìë§Œì˜ ì‹œê°„', g:'â–®â–®â–®â–®â–¯', act:'ì•½ì†ì´ ì·¨ì†Œë˜ë©´ ì•„ì‰¬ì›Œí•˜ê¸°ë³´ë‹¤ ì¿¨í•˜ê²Œ ì‰´ ì‹œê°„ì„ ì£¼ì„¸ìš”.', msg:'ì˜¤íˆë ¤ ì¢‹ì•„, í‘¹ ì‰¬ì–´.' },
            2: { type:'green', k:'ë¹ˆìë¦¬ ì±„ìš°ê¸°', g:'â–®â–®â–®â–¯â–¯', act:'ê°‘ìê¸° ì‹œê°„ì´ ë¹„ì—ˆì„ ë•Œ ë”°ëœ»í•œ ì•ˆë¶€ ì „í™”ë¥¼ í•´ì£¼ì„¸ìš”.', msg:'ì‹¬ì‹¬í•˜ë©´ í†µí™”í• ë˜?' }
        },
        // Q11 (ì—˜ë¦¬ë² ì´í„°): 0=ì¸µìˆ˜(ì •ë³´), 1=ê±°ìš¸(ìì•„), 3=í°(íšŒí”¼)
        10: {
            0: { type:'green', k:'ì˜ˆì¸¡ê°€ëŠ¥ì„±', g:'â–®â–®â–®â–®â–®', act:'ë°ì´íŠ¸ ì „ ë™ì„ ì„ ë¯¸ë¦¬ ê³µìœ í•´ì£¼ì„¸ìš”. ê·¸ëŠ” ì§€ë„ê°€ ìˆì–´ì•¼ ì•ˆì‹¬í•©ë‹ˆë‹¤.', msg:'ì˜¤ëŠ˜ ê³„íšì€ Aë‘ B ì¤€ë¹„í–ˆì–´.' },
            3: { type:'red', k:'ê°•ì œëŒ€í™”', g:'â–®â–®â–®â–®â–¯', act:'ì–´ìƒ‰í•œ ì¹¨ë¬µì„ ëª» ê²¬ë””ê³  ì•„ë¬´ ë§ì´ë‚˜ ê³„ì† ê±¸ì§€ ë§ˆì„¸ìš”.', msg:'ë­ ì¬ë°ŒëŠ” ì–˜ê¸° ì¢€ í•´ë´.' }
        },
        // Q20 (ì¶•í•˜): 0=ë°•ìˆ˜(ì¸ì •), 1=ì‹ì‚¬(ì‹¤ë¦¬), 4=í¬ì˜¹(ì •ì„œ)
        19: {
            0: { type:'green', k:'ê³µê°œì¹­ì°¬', g:'â–®â–®â–®â–®â–®', act:'ë‚¨ë“¤ ì•ì—ì„œ ê·¸ë¥¼ ì¹˜ì¼œì„¸ì›Œì£¼ì„¸ìš”. ìì¡´ê°ì´ ê³§ ìƒëª…ì…ë‹ˆë‹¤.', msg:'ì—­ì‹œ ë‚´ ì• ì¸ ìµœê³ ì•¼. (ì¹œêµ¬ë“¤ ì•ì—ì„œ)' },
            1: { type:'green', k:'ì‹¤ìš©ì£¼ì˜', g:'â–®â–®â–®â–®â–¯', act:'ë§ë¿ì¸ ì¶•í•˜ë³´ë‹¤ ì‹¤ì§ˆì ì¸ ì„ ë¬¼ì´ë‚˜ ë§›ìˆëŠ” ë°¥ì´ ìµœê³ ì…ë‹ˆë‹¤.', msg:'ê³ ìƒí–ˆì–´, ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ëŸ¬ ê°€ì.' },
            0: { type:'red', k:'ë¬´ì‹œ', g:'â–®â–®â–®â–®â–®', act:'ê·¸ì˜ ì„±ì·¨ë¥¼ ë³„ê²ƒ ì•„ë‹Œ ë“¯ ë°˜ì‘í•˜ì§€ ë§ˆì„¸ìš”.', msg:'ê·¸ ì •ë„ëŠ” ëˆ„êµ¬ë‚˜ í•˜ëŠ” ê±° ì•„ëƒ?' } // Q20-0 ì„ íƒ ì‹œ Red ì¡°ì–¸ ì¶”ê°€ ë§¤í•‘ ê°€ëŠ¥
        },
        // Q24 (ë¹„íŒ): 0=ë°˜ë°•(ë…¼ë¦¬), 2=ìƒì²˜(ê°ì •)
        23: {
            0: { type:'green', k:'ë…¼ë¦¬ì ì¡´ì¤‘', g:'â–®â–®â–®â–®â–¯', act:'ê·¸ì˜ ì˜ê²¬ì— ë°˜ëŒ€í•  ë•Œ ê°ì •ì´ ì•„ë‹Œ ë…¼ë¦¬ë¡œ ì„¤ë“í•˜ì„¸ìš”.', msg:'ë„¤ ë§ë„ ì¼ë¦¬ê°€ ìˆë„¤.' },
            2: { type:'red', k:'ê°€ìŠ¤ë¼ì´íŒ…', g:'â–®â–®â–®â–®â–®', act:'"ë„¤ê°€ ë„ˆë¬´ ì˜ˆë¯¼í•´ì„œ ê·¸ë˜"ë¼ë©° ê°ì •ì„ ë¶€ì •í•˜ì§€ ë§ˆì„¸ìš”.', msg:'ì™œ ì´ë ‡ê²Œ ì˜ˆë¯¼í•´? ë†ë‹´ì¸ë°.' }
        }
    };
    
    // Fallback Logic: ë§¤í•‘ë˜ì§€ ì•Šì€ ì§ˆë¬¸ì´ë‚˜ ì„ íƒì§€ì— ëŒ€í•œ ê¸°ë³¸ ì¡°ì–¸ í’€
    const commonAdvice = {
        green: [
            { k:'ê²½ì²­', g:'â–®â–®â–®â–¯â–¯', act:'ë§ì„ ëŠì§€ ë§ê³  ëê¹Œì§€ ë“¤ì–´ì£¼ì„¸ìš”.', msg:'ê·¸ë¬êµ¬ë‚˜, ê³„ì† ì–˜ê¸°í•´ ì¤˜.' },
            { k:'ê¸°ë‹¤ë¦¼', g:'â–®â–®â–®â–¯â–¯', act:'ì¬ì´‰í•˜ì§€ ë§ê³  ê·¸ê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.', msg:'ì²œì²œíˆ í•´ë„ ë¼.' },
            { k:'ì¼ê´€ì„±', g:'â–®â–®â–®â–®â–¯', act:'ê°ì • ê¸°ë³µ ì—†ì´ ëŠ˜ ê·¸ ìë¦¬ì— ìˆì–´ì£¼ì„¸ìš”.', msg:'ê±±ì • ë§ˆ, ë‚´ê°€ ì—¬ê¸° ìˆì–ì•„.' }
        ],
        red: [
            { k:'ë¹„êµ', g:'â–®â–®â–®â–®â–®', act:'ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê·¸ë¥¼ ë¹„êµí•˜ì§€ ë§ˆì„¸ìš”.', msg:'ëˆ„êµ¬ëŠ” ì €ê±° ìƒ€ë‹¤ë˜ë°...' },
            { k:'ëª¨í˜¸í•¨', g:'â–®â–®â–®â–®â–¯', act:'ì• ë§¤í•˜ê²Œ ë§í•´ì„œ ì¶”ë¦¬í•˜ê²Œ ë§Œë“¤ì§€ ë§ˆì„¸ìš”.', msg:'ê¸€ì„, ë‚˜ë„ ì˜ ëª¨ë¥´ê² ëŠ”ë°?' }
        ]
    };

    let step = 0; let answers = []; let tStart = 0;

    function go(id) {
        document.querySelectorAll('.app').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        window.scrollTo(0,0);
    }

    function copyInvite() {
        const url = window.location.href.split('?')[0] + "?mode=guest";
        navigator.clipboard.writeText(url).then(() => {
            alert("ğŸ”— ì´ˆëŒ€ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¹´ì¹´ì˜¤í†¡ ì±„íŒ…ë°©ì— ë¶™ì—¬ë„£ê¸°(Paste) í•˜ì„¸ìš”.");
        });
    }

    function startSurvey() { step = 0; answers = []; go('v-survey'); renderQ(); }

    function renderQ() {
        const q = questions[step];
        const opts = optsArr[step];
        document.getElementById('q-num').innerText = `QUESTION ${String(step+1).padStart(2,'0')}`;
        document.getElementById('q-text').innerText = q;
        document.getElementById('p-fill').style.width = `${((step)/30)*100}%`;
        const box = document.getElementById('opt-box'); box.innerHTML = '';
        tStart = performance.now();
        opts.forEach((txt, i) => {
            const btn = document.createElement('button');
            btn.className = 'opt-btn'; btn.innerText = txt;
            btn.onclick = () => next(i); box.appendChild(btn);
        });
    }

    function next(idx) {
        const lat = performance.now() - tStart;
        answers.push({ i: idx, lat: lat });
        step++; if(step < 30) renderQ(); else finish();
    }

    function prevQ() { if(step > 0) { step--; answers.pop(); renderQ(); } }

    function finish() {
        go('v-seal');
        setTimeout(() => { document.getElementById('key-area').style.display = 'block'; }, 1500);
    }

    function sendKey() {
        const choices = answers.map(a => a.i).join(''); 
        const maxLat = answers.reduce((max, cur, i) => cur.lat > max.val ? {val:cur.lat, idx:i} : max, {val:0, idx:0});
        // ê²°ê³¼ ë¬¸ìì—´ ìƒì„± (ì••ì¶•)
        const raw = `${choices}|${maxLat.idx}`;
        const key = btoa(raw); 
        const url = window.location.href.split('?')[0] + "?key=" + key;
        navigator.clipboard.writeText(url).then(() => {
            alert("ğŸ”‘ ê²°ê³¼ ì—´ì‡ ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì´ˆëŒ€í•´ ì¤€ ë¶„ì—ê²Œ ì¹´í†¡ìœ¼ë¡œ ë³´ë‚´ì£¼ì„¸ìš”.");
        });
    }

    // --- [ENGINE] ê²°ê³¼ ë¦¬í¬íŠ¸ ìƒì„± ì—”ì§„ ---
    function renderReport(key) {
        try {
            const decoded = atob(key);
            const [choicesStr, latIdxStr] = decoded.split('|');
            const choices = choicesStr.split('').map(Number);
            const latIdx = Number(latIdxStr);
            
            // 1. DNA ì½”ë“œ ìƒì„± (ìœ ë‹ˆí¬í•¨ ì¦ëª…)
            // ë‹µë³€ ë°°ì—´ì„ í•´ì‹œí™”í•˜ì—¬ ê³ ìœ  ID ìƒì„±
            let hash = 0;
            for (let i = 0; i < choices.length; i++) {
                hash = ((hash << 5) - hash) + choices[i];
                hash |= 0; 
            }
            const dnaCode = "DNA-" + Math.abs(hash).toString(16).toUpperCase().padStart(8, '0') + "-" + Date.now().toString().slice(-4);
            document.getElementById('soul-id').innerText = dnaCode;

            // 2. ë™ì  ì¡°ë¦½ (Dynamic Assembly)
            let greenList = [];
            let redList = [];
            
            // ë‹µë³€ì„ ìˆœíšŒí•˜ë©° ë§¤í•‘ëœ ì¡°ì–¸ ìˆ˜ì§‘
            choices.forEach((ansIdx, qIdx) => {
                if (adviceMap[qIdx] && adviceMap[qIdx][ansIdx]) {
                    const advice = adviceMap[qIdx][ansIdx];
                    if (advice.type === 'green') greenList.push(advice);
                    else redList.push(advice);
                }
            });

            // ë¶€ì¡±í•œ ê°œìˆ˜ëŠ” ê³µí†µ ì¡°ì–¸ìœ¼ë¡œ ì±„ì›€ (ëœë¤ ì…”í”Œ)
            const shuffle = (array) => array.sort(() => Math.random() - 0.5);
            if (greenList.length < 5) greenList = greenList.concat(shuffle(commonAdvice.green).slice(0, 5 - greenList.length));
            if (redList.length < 5) redList = redList.concat(shuffle(commonAdvice.red).slice(0, 5 - redList.length));
            
            // ìƒìœ„ 5ê°œë§Œ ìë¥´ê¸°
            greenList = greenList.slice(0, 5);
            redList = redList.slice(0, 5);

            // 3. ì°¨íŠ¸ ì ìˆ˜ ê³„ì‚° (ê°„ì´ ë¡œì§)
            let scores = { P:0, R:0, E:0, S:0 };
            choices.forEach((c, i) => { 
                // ì„ì˜ ë§¤í•‘ (ì‹¤ì œë¡  ë” ë³µì¡í•˜ì§€ë§Œ ë°ëª¨ìš© ê°„ì†Œí™”)
                const type = ['E','P','S','R'][i%4]; 
                scores[type]++; 
            });
            const domType = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
            const typeNames = { E: "í™˜ê²½ ë¯¼ê°í˜• (Sensory)", P: "ì•ˆì „ê¸°ì§€ ì¶”êµ¬í˜• (Safety)", R: "ë‚´ë©´ íšŒë³µí˜• (Inner)", S: "ì¸ì • ìš•êµ¬í˜• (Social)" };
            document.getElementById('type-name').innerText = typeNames[domType];
            
            drawChart(scores);

            // 4. ë¦¬í¬íŠ¸ ë Œë”ë§
            const gBox = document.getElementById('green-list');
            greenList.forEach(item => {
                gBox.innerHTML += `
                <div class="item-row">
                    <div class="item-head">
                        <span class="item-keyword">${item.k}</span>
                        <span class="thermo t-med">ì¤‘ìš”ë„ ${item.g}</span>
                    </div>
                    <div class="action-text">${item.act}</div>
                    <div class="msg-box" onclick="alert('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤')">ğŸ’¬ "${item.msg}"</div>
                </div>`;
            });
            
            const rBox = document.getElementById('red-list');
            redList.forEach(item => {
                rBox.innerHTML += `
                <div class="item-row">
                    <div class="item-head">
                        <span class="item-keyword" style="color:#ffcccc">${item.k}</span>
                        <span class="thermo t-high">ì¹˜ëª…ë„ ${item.g}</span>
                    </div>
                    <div class="action-text">${item.act}</div>
                    <div class="msg-box" style="border-left-color:var(--love)" onclick="alert('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤')">ğŸ’¬ "${item.msg}"</div>
                </div>`;
            });

            // 5. ë ˆì´í„´ì‹œ ë©”ì‹œì§€
            const qTxt = questions[latIdx];
            document.getElementById('latency-msg').innerHTML = 
                `íŒŒíŠ¸ë„ˆëŠ” <b>"${qTxt.substring(0, 15)}..."</b> ì§ˆë¬¸ì—ì„œ ê°€ì¥ ì˜¤ë˜ ë§ì„¤ì˜€ìŠµë‹ˆë‹¤. ì´ ì£¼ì œëŠ” ê·¸ì—ê²Œ ë§ ëª» í•  ê³ ë¯¼ì´ë‚˜ ìƒì²˜ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ, ëŒ€í™”í•  ë•Œ ê°ë³„íˆ ë°°ë ¤í•´ ì£¼ì„¸ìš”.`;

        } catch(e) { alert("í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."); go('v-landing'); }
    }

    function drawChart(sc) {
        const ctx = document.getElementById('radarChart').getContext('2d');
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['ì•ˆì „ì¶”êµ¬', 'ë‚´ë©´íšŒë³µ', 'ê°ê°ì˜ˆë¯¼', 'ì¸ì •ìš•êµ¬', 'ê³µê°ëŠ¥ë ¥'],
                datasets: [{
                    data: [sc.P*5, sc.R*5, sc.E*5, sc.S*5, 80],
                    backgroundColor: 'rgba(0,0,0,0)', // ì™€ì´ì–´í”„ë ˆì„
                    borderColor: '#00f2ff', borderWidth: 2,
                    pointBackgroundColor: '#fff', pointBorderColor: '#00f2ff', pointRadius: 4
                }]
            },
            options: {
                scales: {
                    r: {
                        angleLines: { color: '#222' }, grid: { color: '#222' },
                        pointLabels: { color: '#888', font:{size:11} },
                        ticks: { display: false }, suggestedMin: 0, suggestedMax: 100
                    }
                }, plugins: { legend: { display: false } }
            }
        });
    }

    window.onload = () => {
        const p = new URLSearchParams(window.location.search);
        if(p.get('key')) { go('v-report'); renderReport(p.get('key')); }
        else if(p.get('mode') === 'guest') { go('v-guest'); }
        else { go('v-landing'); }
    };
</script>
</body>
</html>
