<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>SYNAPSE : LIGHT CORE</title>
    <style>
        /* [SYNAPSE LIGHT ENGINE V24] */
        @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@400;700;900&family=Noto+Sans+KR:wght@300;500;700;900&family=Roboto+Mono:wght@400;700&display=swap');
        
        :root {
            --bg-core: #000000;
            --bg-card: #121212;
            --bg-panel: #1a1a1a;
            --border: #333333;
            --text-main: #ffffff;
            --text-sub: #888888;
            --neon-cyan: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-red: #ff003c;
            --neon-gold: #ffd700;
            --neon-green: #00ff66;
        }

        body.white-mode {
            --bg-core: #f5f5f7; --bg-card: #ffffff; --bg-panel: #e9ecef; --border: #d1d5db;
            --text-main: #111827; --text-sub: #4b5563;
            --neon-cyan: #0066ff; --neon-purple: #6200ea; --neon-red: #d32f2f; --neon-gold: #f57c00; --neon-green: #2e7d32;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        /* [SCROLL FIX] */
        body { 
            margin: 0; padding: 0; background: var(--bg-core); color: var(--text-main); 
            font-family: 'Noto Sans KR', sans-serif; 
            width: 100%; height: 100dvh; /* 모바일 높이 고정 */
            overflow: hidden; /* 전체 스크롤 막음 (내부 스크롤 사용) */
            position: fixed; /* 튕김 방지 */
        }

        /* [LAYOUT LAYERS] */
        .page { 
            position: absolute; inset: 0; display: flex; flex-direction: column; 
            background: var(--bg-core); z-index: 10; width: 100%; height: 100%;
        }
        .page.hidden { display: none; }

        /* [HEADER] */
        header { padding: 40px 20px 15px; border-bottom: 1px solid var(--border); flex-shrink: 0; background: var(--bg-core); z-index: 20; }
        .top-row { display: flex; justify-content: space-between; align-items: flex-end; }
        .logo-main { font-size: 32px; font-weight: 900; color: var(--neon-cyan); letter-spacing: -1px; font-family: 'Exo 2'; font-style: italic; line-height: 1; }
        .logo-sub { font-size: 10px; color: var(--text-sub); font-weight: 700; letter-spacing: 2px; font-family: 'Roboto Mono'; margin-top: 5px; }
        .clock-box { text-align: right; font-family: 'Roboto Mono'; }
        .time-big { font-size: 24px; font-weight: 700; color: var(--text-main); }
        .date-full { font-size: 11px; color: var(--text-sub); }

        /* [MAIN SCROLL AREA] */
        .main-scroll { 
            flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 120px; 
            -webkit-overflow-scrolling: touch; /* 아이폰 부드러운 스크롤 */
        }
        .sec-head { font-size: 11px; color: var(--text-sub); font-weight: 900; margin: 25px 0 12px; letter-spacing: 1px; font-family: 'Roboto Mono'; border-left: 3px solid var(--neon-cyan); padding-left: 8px; }

        /* [CARDS] */
        .exec-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .card { 
            background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 15px; height: 100px; 
            display: flex; flex-direction: column; justify-content: flex-start; position: relative; overflow: hidden;
        }
        .card:active { border-color: var(--neon-cyan); transform: scale(0.98); }
        .c-tit { font-size: 16px; font-weight: 900; font-family: 'Roboto Mono'; z-index: 2; text-shadow: 0 2px 5px rgba(0,0,0,0.5); }
        
        #score-bg { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.5; z-index: 1; display: none; }
        .scan-line { 
            position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: var(--neon-cyan); 
            box-shadow: 0 0 15px var(--neon-cyan); opacity: 0; z-index: 5; pointer-events: none;
        }
        .card.scanning .scan-line { opacity: 1; animation: scanMove 2s linear infinite; }
        @keyframes scanMove { 0% { top: 0; } 100% { top: 100%; } }

        /* [DOCK] */
        .dock { 
            position: fixed; bottom: 0; left: 0; width: 100%; height: 90px; 
            background: var(--bg-core); border-top: 1px solid var(--border); 
            display: flex; justify-content: space-around; align-items: flex-start; padding-top: 18px; z-index: 50; 
        }
        .d-btn { width: 55px; display: flex; flex-direction: column; align-items: center; gap: 5px; opacity: 0.5; color: var(--text-main); }
        .d-btn.active { opacity: 1; color: var(--neon-cyan); }
        .d-ico { width: 24px; height: 24px; fill: currentColor; }
        .d-lbl { font-size: 10px; font-weight: 700; }
        .vis-btn { 
            width: 64px; height: 64px; background: linear-gradient(135deg, var(--neon-cyan), #0066ff); 
            border-radius: 20px; margin-top: -35px; border: 5px solid var(--bg-core); 
            display: flex; align-items: center; justify-content: center; box-shadow: 0 5px 20px rgba(0,243,255,0.3);
        }

        /* [AI ANALYSIS VIEW] */
        #analysis-view { 
            position: fixed; bottom: 0; left: 0; width: 100%; height: 92dvh; 
            background: var(--bg-card); z-index: 2000; border-top: 2px solid var(--neon-cyan); border-radius: 25px 25px 0 0;
            display: flex; flex-direction: column; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.1, 0.7, 0.1, 1);
            box-shadow: 0 -10px 50px rgba(0,0,0,0.8);
        }
        #analysis-view.show { transform: translateY(0); }
        .an-img-area { height: 40%; background: #000; position: relative; overflow: hidden; border-radius: 23px 23px 0 0; border-bottom: 1px solid var(--border); }
        #an-img-target { width: 100%; height: 100%; object-fit: contain; }
        .an-data-area { 
            flex: 1; padding: 25px; overflow-y: auto; background: var(--bg-core); 
            -webkit-overflow-scrolling: touch; color: var(--text-sub); font-size: 14px; line-height: 1.6;
        }

        /* [COMPONENTS & SHORTCUTS] */
        .st-item { background: var(--bg-panel); padding: 15px; border-radius: 12px; margin-bottom: 12px; border: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .st-inp { width: 65%; background: transparent; border: none; color: white; padding: 5px; font-size: 14px; border-bottom: 1px solid var(--border); text-align: right; }
        .close-btn { width: 100%; height: 55px; background: var(--text-main); color: var(--bg-core); border-radius: 12px; font-weight: 900; margin-top: 20px; border: none; font-size: 16px; }
        
        .shortcut-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .s-btn { height: 85px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; transition: 0.1s; }
        .s-btn:active { transform: scale(0.95); background: var(--bg-panel); }
        
        /* [INPUT MODAL] */
        #input-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 3000; display: none; flex-direction: column; justify-content: flex-end; }
        #input-modal.show { display: flex; }
        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 20px; background: var(--bg-card); border-top: 2px solid var(--neon-cyan); border-radius: 20px 20px 0 0; }
        .num-btn { height: 55px; background: var(--bg-panel); border: 1px solid var(--border); border-radius: 10px; color: white; font-size: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <input type="file" id="cam-input" hidden accept="image/*">
    
    <div id="p-home" class="page">
        <header>
            <div class="top-row">
                <div>
                    <div class="logo-main">SYNAPSE</div>
                    <div class="logo-sub">LIGHT ENGINE</div>
                </div>
                <div class="clock-box">
                    <div class="time-big" id="c-time">00:00</div>
                    <div class="date-full" id="c-date">READY</div>
                </div>
            </div>
        </header>

        <div class="main-scroll">
            <div class="sec-head">CONTROL UNIT</div>
            <div class="exec-grid">
                <div class="card" id="card-score" onclick="Action.score()">
                    <div class="scan-line"></div>
                    <img id="score-bg">
                    <div class="c-tit" id="score-tit" style="color:var(--neon-cyan)">VISION</div>
                </div>
                <div class="card" onclick="App.open('BANK')"><div class="c-tit" style="color:var(--neon-gold)">BANK</div></div>
                <div class="card" onclick="App.open('ODDS')"><div class="c-tit" style="color:var(--neon-purple)">ODDS</div></div>
                <div class="card" onclick="App.open('EDGE')"><div class="c-tit" style="color:var(--neon-red)">EDGE</div></div>
            </div>

            <div class="sec-head">QUICK ACCESS</div>
            <div id="grid-box" class="shortcut-grid"></div>
        </div>

        <nav class="dock">
            <div class="d-btn" onclick="App.open('CALENDAR')"><svg class="d-ico" viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"/></svg><span class="d-lbl">SCHED</span></div>
            <div class="d-btn" onclick="App.open('CALC')"><svg class="d-ico" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 2h5v5h-5V5zM5 5h5v5H5V5zm0 7h5v5H5v-5zm7 5h5v5h-5v-5z"/></svg><span class="d-lbl">CALC</span></div>
            <div class="vis-btn" onclick="document.getElementById('cam-input').click()"><svg width="28" height="28" fill="white" viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/></svg></div>
            <div class="d-btn" onclick="Theme.toggle()"><svg class="d-ico" viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-3.03 0-5.5-2.47-5.5-5.5 0-1.82.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg><span class="d-lbl">MODE</span></div>
            <div class="d-btn" onclick="App.open('SETUP')"><svg class="d-ico" viewBox="0 0 24 24"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.5.42l-.38 2.65c-.61.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65z"/></svg><span class="d-lbl">SETUP</span></div>
        </nav>
    </div>

    <div id="analysis-view">
        <button onclick="Action.closeAnalysis()" style="position:absolute; top:15px; right:20px; z-index:100; background:rgba(0,0,0,0.6); color:white; border:none; border-radius:50%; width:40px; height:40px; font-size:24px; backdrop-filter:blur(5px);">×</button>
        <div class="an-img-area"><img id="an-img-target"></div>
        <div class="an-data-area" id="ai-result">
            <div style="text-align:center; padding-top:50px;">
                <div style="font-size:16px; color:var(--neon-cyan); margin-bottom:10px;">INITIALIZING GEMINI...</div>
                <div style="color:#666;">데이터 분석 중입니다.</div>
            </div>
        </div>
    </div>

    <div id="p-sub" class="page hidden">
        <header class="sub-head" style="padding:25px 20px; border-bottom:1px solid var(--border);">
            <div style="font-size:22px; font-weight:900; font-style:italic;" id="sub-tit">TITLE</div>
        </header>
        <div id="sub-con" class="main-scroll"></div>
        <div style="padding:20px; background:var(--bg-core); border-top:1px solid var(--border); z-index:50;">
            <button class="close-btn" onclick="App.close()">닫기 (CLOSE)</button>
        </div>
    </div>

    <div id="input-modal">
        <div style="padding:20px; background:var(--bg-card);">
            <div id="inp-disp" style="text-align:right; font-size:32px; color:white; margin-bottom:20px; font-family:'Roboto Mono';">0</div>
        </div>
        <div class="numpad">
            <button class="num-btn" onclick="Input.add(1)">1</button><button class="num-btn" onclick="Input.add(2)">2</button><button class="num-btn" onclick="Input.add(3)">3</button>
            <button class="num-btn" onclick="Input.add(4)">4</button><button class="num-btn" onclick="Input.add(5)">5</button><button class="num-btn" onclick="Input.add(6)">6</button>
            <button class="num-btn" onclick="Input.add(7)">7</button><button class="num-btn" onclick="Input.add(8)">8</button><button class="num-btn" onclick="Input.add(9)">9</button>
            <button class="num-btn" onclick="Input.clr()">C</button><button class="num-btn" onclick="Input.add(0)">0</button><button class="num-btn" onclick="Input.back()">←</button>
            <button class="num-btn" style="grid-column:span 3; background:var(--neon-cyan); color:black;" onclick="Input.done()">ENTER</button>
        </div>
    </div>

    <script>
        // [DATA & CORE]
        const DefaultDB = {
            normal: [
                {n:'FLASHSCORE',u:'https://www.flashscore.com',i:'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z'},
                {n:'ODDSPORTAL',u:'https://www.oddsportal.com',i:'M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4'},
                {n:'SOFASCORE',u:'https://www.sofascore.com',i:'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 2h5v5h-5V5z'},
                {n:'COVERS',u:'https://www.covers.com',i:'M4 10h3v7H4zM10.5 10h3v7h-3zM17 10h3v7h-3z'},
                {n:'OLBG',u:'https://www.olbg.com',i:'M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85'},
                {n:'NAVER',u:'https://sports.news.naver.com',i:'M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5'},
                {n:'YOUTUBE',u:'https://www.youtube.com',i:'M10 16.5l6-4.5-6-4.5v9z'},
                {n:'GOOGLE',u:'https://www.google.com',i:'M12.5 11h9c.3 0 .5.2.5.5v2c0 5.2-3.8 9-9 9s-9-3.8-9-9 3.8-9 9-9c2.4 0 4.5.8 6.2 2.3l-3.5 3.5c-1.2-1.1-2.7-1.8-4.7-1.8-3.3 0-6 2.7-6 6s2.7 6 6 6c3.2 0 5.5-2 5.9-4.7h-5.9v-4.3z'}
            ],
            secret: Array(8).fill({n:'[VIP LINK]',u:'',i:'M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z'})
        };
        let DB = JSON.parse(localStorage.getItem('SYN_DB')) || DefaultDB;

        // [APP CONTROLLER]
        const App = {
            open: (m) => {
                const sub = document.getElementById('p-sub');
                const con = document.getElementById('sub-con');
                document.getElementById('sub-tit').innerText = m;
                sub.classList.remove('hidden');
                
                if(m=='SETUP') Settings.render(con);
                else if(m=='BANK') Bank.render(con);
                else if(m=='CALC') con.innerHTML = Calculator.html;
                else if(m=='CALENDAR') Calendar.render(con);
                else con.innerHTML = `<div style='padding:20px;'>준비 중인 모듈입니다.</div>`;
            },
            close: () => document.getElementById('p-sub').classList.add('hidden')
        };

        const Theme = { toggle: () => document.body.classList.toggle('white-mode') };
        const Ghost = { active: false, trigger: () => { if(navigator.vibrate)navigator.vibrate(50); Ghost.active = !Ghost.active; Render.shortcuts(); } };

        // [ACTION: SCAN & AI]
        const Action = {
            hasImg: false, imgData: null,
            score: () => {
                if(Action.hasImg && Action.imgData) {
                    document.getElementById('an-img-target').src = Action.imgData;
                    document.getElementById('analysis-view').classList.add('show');
                    Gemini.analyze(Action.imgData);
                } else { document.getElementById('cam-input').click(); }
            },
            closeAnalysis: () => {
                document.getElementById('analysis-view').classList.remove('show');
                document.getElementById('score-bg').style.display='none';
                document.getElementById('card-score').classList.remove('scanning');
                document.getElementById('score-tit').innerText = 'VISION';
                Action.hasImg = false;
            }
        };

        // [GEMINI API - LATEST MODEL]
        const Gemini = {
            analyze: async (img) => {
                const res = document.getElementById('ai-result');
                const key = localStorage.getItem('API_KEY');
                if(!key) { res.innerHTML = "<div style='color:var(--neon-red); text-align:center;'>API 키가 없습니다.<br>SETUP 메뉴에서 입력하세요.</div>"; return; }
                
                res.innerHTML = "<div style='color:var(--neon-cyan); text-align:center;'>데이터 연산 중...<br>(Analyzing...)</div>";
                const cleanBase64 = img.split(',')[1];
                const prompt = `당신은 시냅스(Synapse)의 수석 AI 분석관입니다. 사용자가 업로드한 스포츠 배당 사진을 정밀 분석하십시오.
                [필수 포함 내용]
                1. 사진 OCR: 팀명, 배당, 기준점, 유저 선택(승무패/언오버) 판독.
                2. 데이터 대조: 플래시스코어 데이터 기반 분석.
                3. 결론: 1500자 이상의 독설 리포트, EV 지수, EDGE SCORE(0~100).
                [형식] HTML 태그 사용 (h4, p, div 등). 색상은 neon-cyan(#00f3ff), neon-red(#ff003c) 활용.`;

                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${key}`, {
                        method: "POST", headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }, { inline_data: { mime_type: "image/jpeg", data: cleanBase64 } }] }] })
                    });
                    const data = await response.json();
                    if(data.error) throw new Error(data.error.message);
                    res.innerHTML = data.candidates[0].content.parts[0].text;
                } catch (e) { res.innerHTML = `<div style='color:var(--neon-red);'>[ERROR] ${e.message}<br>키를 확인해주세요.</div>`; }
            }
        };

        // [MODULES]
        const Settings = {
            render: (el) => {
                el.innerHTML = `
                    <div style="color:var(--text-sub); font-size:12px; margin-bottom:5px;">SYSTEM KEY</div>
                    <div class="st-item"><div style="color:var(--neon-cyan);font-weight:900;">API KEY</div><input id="api-key" class="st-inp" type="password" value="${localStorage.getItem('API_KEY')||''}" placeholder="Paste Here"></div>
                    <div style="color:var(--text-sub); font-size:12px; margin:20px 0 5px;">LINK SETTINGS</div>
                    ${DB.normal.map((v,i)=>`<div class="st-item"><input id="n${i}" value="${v.n}" style="width:30%; background:transparent; border:none; color:var(--neon-cyan); font-weight:bold;"><input id="u${i}" value="${v.u}" class="st-inp" style="width:65%;"></div>`).join('')}
                    <button class="close-btn" style="background:var(--neon-cyan); color:black;" onclick="Settings.save()">저장 (SAVE)</button>
                    <button class="close-btn" style="background:transparent; color:var(--neon-red); border:1px solid var(--neon-red); margin-top:10px;" onclick="localStorage.clear(); location.reload();">초기화 (RESET)</button>
                `;
            },
            save: () => {
                localStorage.setItem('API_KEY', document.getElementById('api-key').value);
                for(let i=0; i<8; i++){ DB.normal[i].n = document.getElementById(`n${i}`).value; DB.normal[i].u = document.getElementById(`u${i}`).value; }
                localStorage.setItem('SYN_DB', JSON.stringify(DB));
                alert('저장되었습니다.'); App.close(); Render.shortcuts();
            }
        };

        const Bank = {
            bal: parseInt(localStorage.getItem('SYN_BANK')) || 0,
            render: (el) => {
                el.innerHTML = `
                    <div style="text-align:center; padding:40px; border:1px solid var(--border); border-radius:20px; background:var(--bg-panel);">
                        <div style="color:var(--text-sub); font-size:12px;">TOTAL BALANCE</div>
                        <div style="font-size:40px; font-weight:900; color:var(--neon-gold); font-family:'Roboto Mono'; margin-top:10px;">₩ ${Bank.bal.toLocaleString()}</div>
                    </div>
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:20px;">
                        <button onclick="Input.open(1)" style="height:60px; background:rgba(0,255,102,0.1); color:var(--neon-green); border:1px solid var(--neon-green); border-radius:12px; font-weight:bold;">입금 (IN)</button>
                        <button onclick="Input.open(-1)" style="height:60px; background:rgba(255,60,60,0.1); color:var(--neon-red); border:1px solid var(--neon-red); border-radius:12px; font-weight:bold;">출금 (OUT)</button>
                    </div>`;
            }
        };

        const Input = {
            curr: '0', sign: 1,
            open: (s) => { Input.curr='0'; Input.sign=s; document.getElementById('input-modal').classList.add('show'); Input.update(); },
            add: (n) => { Input.curr = Input.curr=='0'? String(n) : Input.curr+n; Input.update(); },
            clr: () => { Input.curr='0'; Input.update(); },
            back: () => { Input.curr = Input.curr.length>1 ? Input.curr.slice(0,-1) : '0'; Input.update(); },
            update: () => { document.getElementById('inp-disp').innerText = (Input.sign>0?'+':'-') + " ₩ " + parseInt(Input.curr).toLocaleString(); },
            done: () => { 
                if(Input.curr!='0') { Bank.bal += parseInt(Input.curr) * Input.sign; localStorage.setItem('SYN_BANK', Bank.bal); App.open('BANK'); } 
                document.getElementById('input-modal').classList.remove('show'); 
            }
        };

        const Calculator = { html:`<div style="height:100%; display:flex; flex-direction:column;"><div id="calc-disp" style="flex:1; text-align:right; font-size:40px; padding:20px; color:white; font-family:'Roboto Mono';">0</div><div style="display:grid; grid-template-columns:repeat(4,1fr); gap:10px; height:60%;">${['7','8','9','/','4','5','6','*','1','2','3','-','C','0','.','+','='].map(k=>`<button onclick="Calculator.c('${k}')" style="background:${k=='='?'var(--neon-cyan)':'var(--bg-card)'}; color:${k=='='?'black':'white'}; border:1px solid var(--border); border-radius:10px; font-size:20px; font-weight:bold; grid-column:${k=='='?'span 4':'auto'};">${k}</button>`).join('')}</div></div>`, c:(k)=>{ const r=document.getElementById('calc-disp'); if(k=='C')r.innerText='0'; else if(k=='=')try{r.innerText=eval(r.innerText)}catch{r.innerText='ERR'} else r.innerText=r.innerText=='0'?k:r.innerText+k; } };

        const Calendar = {
            render: (el) => {
                const d=new Date(), y=d.getFullYear(), m=d.getMonth();
                let h = `<div style="font-size:24px; font-weight:900; color:var(--neon-cyan); margin-bottom:20px;">${y}.${m+1}</div><div style="display:grid; grid-template-columns:repeat(7,1fr); gap:5px; text-align:center;">`;
                for(let i=1; i<=31; i++) h+=`<div style="padding:10px; background:var(--bg-panel); border-radius:8px; font-size:12px; color:var(--text-sub);">${i}</div>`;
                h += `</div><div style="margin-top:20px; color:#666; text-align:center;">스케줄 기능은 다음 업데이트에 포함됩니다.</div>`;
                el.innerHTML = h;
            }
        };

        const Render = {
            init: () => { Render.shortcuts(); },
            shortcuts: () => {
                const box = document.getElementById('grid-box'); let h = '';
                const list = Ghost.active ? DB.secret : DB.normal;
                list.forEach((v, i) => {
                    let u = v.u; if(u && !u.startsWith('http')) u = 'https://'+u;
                    h += `<div class="s-btn" onclick="${u?`window.open('${u}')`:`App.open('SETUP')`}"><svg width="24" height="24" fill="var(--text-sub)" viewBox="0 0 24 24"><path d="${v.i}"/></svg><div style="font-size:10px; color:var(--text-sub); font-weight:700;">${v.n}</div></div>`;
                });
                h += `<div class="s-btn" onclick="Ghost.trigger()"><svg width="24" height="24" fill="${Ghost.active?`var(--neon-cyan)`:`#444`}" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg><div style="font-size:10px; color:${Ghost.active?`var(--neon-cyan)`:`#444`}">GHOST</div></div>`;
                box.innerHTML = h;
            }
        };

        window.onload = () => {
            Render.init();
            setInterval(() => {
                const n = new Date();
                document.getElementById('c-time').innerText = `${String(n.getHours()).padStart(2,'0')}:${String(n.getMinutes()).padStart(2,'0')}`;
                document.getElementById('c-date').innerText = `${n.getFullYear()}.${n.getMonth()+1}.${n.getDate()}`;
            }, 1000);
            
            document.getElementById('cam-input').addEventListener('change', (e) => {
                if(e.target.files[0]) {
                    const reader = new FileReader();
                    reader.onload = (ev) => {
                        const bg = document.getElementById('score-bg');
                        bg.src = ev.target.result; bg.style.display = 'block';
                        Action.hasImg = true; Action.imgData = ev.target.result;
                        document.getElementById('card-score').classList.add('scanning');
                        document.getElementById('score-tit').innerText = "SCANNING...";
                        setTimeout(() => Action.score(), 2000);
                    }
                    reader.readAsDataURL(e.target.files[0]);
                }
            });
        };
    </script>
</body>
</html>
