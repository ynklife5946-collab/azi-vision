<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SY-ON | ì†Œì¤‘í•œ ì´ë¥¼ ìœ„í•œ ê°ê° ì§€ì¹¨ì„œ</title>
    <style>
        :root {
            --primary-color: #4a5568;
            --accent-color: #a0aec0;
            --bg-color: #f7fafc;
            --text-color: #2d3748;
        }
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            line-height: 1.6;
        }
        #app { max-width: 600px; margin: 0 auto; padding: 20px; }
        .screen { display: none; text-align: center; animation: fadeIn 0.5s; }
        .screen.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* ëœë”© í˜ì´ì§€ ìŠ¤íƒ€ì¼ (Section 3) */
        .hero-title { font-size: 1.8rem; font-weight: 700; margin-bottom: 1rem; color: #1a202c; }
        .hero-desc { font-size: 1rem; color: #4a5568; margin-bottom: 2rem; }
        .stats-box { background: #edf2f7; padding: 15px; border-radius: 12px; font-size: 0.9rem; margin-bottom: 20px; text-align: left; }
        
        button {
            background: var(--primary-color); color: white; border: none; padding: 15px 30px;
            border-radius: 8px; cursor: pointer; font-size: 1rem; width: 100%; transition: 0.3s;
        }
        button:hover { background: #2d3748; }

        /* ì§ˆë¬¸ì§€ ìŠ¤íƒ€ì¼ */
        .q-text { font-size: 1.2rem; margin: 40px 0; font-weight: 600; }
        .options-list { list-style: none; padding: 0; }
        .option-btn {
            background: white; border: 1px solid #e2e8f0; padding: 15px; margin-bottom: 10px;
            border-radius: 10px; cursor: pointer; text-align: left; transition: 0.2s;
        }
        .option-btn:hover { background: #f1f5f9; border-color: #cbd5e0; }

        /* ê´€ë¦¬ì & ê²°ê³¼ í˜ì´ì§€ */
        .admin-panel { position: fixed; bottom: 10px; right: 10px; opacity: 0.3; }
        .admin-panel:hover { opacity: 1; }
        .report-card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); text-align: left; }
        .tag { display: inline-block; background: #e2e8f0; padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; margin-right: 5px; }
    </style>
</head>
<body>

<div id="app">
    <section id="screen-home" class="screen active">
        <div class="hero-title">ë‹¹ì‹ ì˜ ì§„ì‹¬ì´ ê¹Šê²Œ ë‹¿ì„ ìˆ˜ ìˆë„ë¡</div>
        <div class="hero-desc">ì†Œì¤‘í•œ ì‚¬ëŒì˜ ê³ ìœ í•œ ê°ê°ì  ê²°ì„ ì´í•´í•˜ê³ ,<br>ë” ë”°ëœ»í•œ ë°°ë ¤ë¥¼ ìœ„í•œ 'ì¼€ì–´ ì§€ì¹¨ì„œ'ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”.</div>
        <div class="stats-box">
            <b>SY-ON ê³¼í•™ì  ë¶„ì„ ì‹œìŠ¤í…œ:</b><br>
            â€¢ 5Â³â° í™•ë¥ ì˜ ì •êµí•œ ë°ì´í„° ë§¤ì¹­<br>
            â€¢ ë¬´ì˜ì‹ì  ë°˜ì‘ ì§€ì—°(Latency) ë¶„ì„<br>
            â€¢ 4ëŒ€ ì •ì„œ ì§€í‘œ(E, P, S, R) ì‚°ì¶œ
        </div>
        <button onclick="startTest()">ê°ê° ë„ê° ì‹œì‘í•˜ê¸°</button>
    </section>

    <section id="screen-quiz" class="screen">
        <div id="progress" style="font-size: 0.8rem; color: #a0aec0;"></div>
        <div id="question-area">
            <div class="q-text" id="q-text"></div>
            <div class="options-list" id="options-list"></div>
        </div>
    </section>

    <section id="screen-result" class="screen">
        <div class="hero-title">ìš°ë¦¬ë¥¼ ìœ„í•œ ì¼€ì–´ ì§€ì¹¨ì„œ</div>
        <div class="report-card" id="report-content">
            </div>
        <button onclick="location.reload()" style="margin-top:20px; background:#a0aec0;">ë‹¤ì‹œ í•˜ê¸°</button>
    </section>

    <div class="admin-panel">
        <button onclick="toggleAdmin()" style="padding:5px 10px; font-size:0.6rem;">Admin</button>
    </div>
    <section id="screen-admin" class="screen" style="background:#fff; padding:20px; border:1px solid #ddd;">
        <h3>ì˜ì¥ë‹˜ ì „ìš© ëŒ€ì‹œë³´ë“œ</h3>
        <button onclick="shuffleQuestions()" style="background:#48bb78; margin-bottom:10px;">ì§ˆë¬¸ ì…”í”Œ (ëœë¤ 30ê°œ ì¶”ì¶œ)</button>
        <div id="admin-stats" style="text-align:left; font-size:0.8rem;"></div>
        <button onclick="showScreen('home')" style="margin-top:10px; background:#718096;">ë‚˜ê°€ê¸°</button>
    </section>
</div>

<script>
    // --- ì˜ì¥ë‹˜ì˜ ë°ì´í„° ë±…í¬ (í™•ì¥ ê°€ëŠ¥) ---
    const questionBank = [
        { q: "ì•ˆê°œê°€ ììš±í•œ ìˆ²ê¸¸ì„ ê±·ê³  ìˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë°œê±¸ìŒì´ ë©ˆì¶”ëŠ” ê³³ì€?", options: ["ê±°ëŒ€í•œ ë°”ìœ„ ì˜†", "ì‘ì€ ê°œìš¸ê°€", "ë¹›ì´ ìŸì•„ì§€ëŠ” ë¹ˆí„°", "ì¢ì€ ì˜¤ì†”ê¸¸", "ì–´ë‘ìš´ ë‚˜ë¬´ ë¤ë¶ˆ"], weight: [1,2,0,0] },
        { q: "í…… ë¹ˆ ìº”ë²„ìŠ¤ ìœ„ì— ë‹¨ í•˜ë‚˜ì˜ ì„ ì„ ê¸‹ëŠ”ë‹¤ë©´?", options: ["ë‚ ì¹´ë¡œìš´ ì§ì„ ", "ë¶€ë“œëŸ¬ìš´ ê³¡ì„ ", "ëŠì–´ì§ˆ ë“¯í•œ íŒŒì„ ", "ì™„ë²½í•œ ì›", "ì‘ì€ ì  í•˜ë‚˜"], weight: [0,1,2,0] },
        // ... (ë‚˜ë¨¸ì§€ 80ê°œ ì´ìƒ ì§ˆë¬¸ë“¤ì„ ì—¬ê¸°ì— ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤)
    ];

    // ì„ì‹œ ë”ë¯¸ ì§ˆë¬¸ ì¶”ê°€ (30ê°œë¥¼ ë§ì¶”ê¸° ìœ„í•¨)
    for(let i=3; i<=30; i++) {
        questionBank.push({ q: `ì¶”ìƒ ì§ˆë¬¸ ${i}: ë‹¹ì‹ ì˜ ê°ê°ì´ í–¥í•˜ëŠ” ê³³ì€ ì–´ë””ì¸ê°€ìš”?`, options: ["ì˜µì…˜ A", "ì˜µì…˜ B", "ì˜µì…˜ C", "ì˜µì…˜ D", "ì˜µì…˜ E"], weight: [Math.random(), Math.random(), Math.random(), Math.random()] });
    }

    let currentQuestions = [...questionBank].slice(0, 30);
    let userAnswers = [];
    let currentIdx = 0;
    let startTime = 0;

    // --- ì—”ì§„ ë¡œì§ ---

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById('screen-' + id).classList.add('active');
    }

    function startTest() {
        currentIdx = 0;
        userAnswers = [];
        showScreen('quiz');
        renderQuestion();
    }

    function renderQuestion() {
        const q = currentQuestions[currentIdx];
        document.getElementById('progress').innerText = `${currentIdx + 1} / 30`;
        document.getElementById('q-text').innerText = q.q;
        const list = document.getElementById('options-list');
        list.innerHTML = '';
        
        startTime = performance.now(); // ë°˜ì‘ ì‹œê°„ ì¸¡ì • ì‹œì‘
        
        q.options.forEach((opt, i) => {
            const btn = document.createElement('div');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => handleAnswer(i);
            list.appendChild(btn);
        });
    }

    function handleAnswer(optionIdx) {
        const endTime = performance.now();
        const latency = endTime - startTime;
        
        userAnswers.push({
            qIdx: currentIdx,
            ansIdx: optionIdx,
            latency: latency,
            weight: currentQuestions[currentIdx].weight
        });

        currentIdx++;
        if (currentIdx < 30) {
            renderQuestion();
        } else {
            generateReport();
        }
    }

    function generateReport() {
        // 4ëŒ€ ì§€í‘œ ì—°ì‚° (E, P, S, R)
        let scores = [0, 0, 0, 0];
        let totalLatency = 0;
        userAnswers.forEach(ans => {
            ans.weight.forEach((w, i) => scores[i] += w);
            totalLatency += ans.latency;
        });

        const avgLatency = totalLatency / 30;
        const hesitantAnswers = userAnswers.filter(a => a.latency > avgLatency * 1.5);

        // ê²°ê³¼ ë¦¬í¬íŠ¸ ìƒì„± (ì˜ì¥ë‹˜ì˜ 7-7-7 ë¡œì§)
        const reportArea = document.getElementById('report-content');
        reportArea.innerHTML = `
            <p><b>ë¶„ì„ ê²°ê³¼:</b> ì†Œì¤‘í•œ ë¶„ì€ í˜„ì¬ ì •ì„œì  ì•ˆì •ì´ í•„ìš”í•œ ìƒíƒœì´ë©°, ì„¬ì„¸í•œ ê³µê°„ì  ë°°ë ¤($Shadow$)ì— ê°€ì¥ ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•©ë‹ˆë‹¤.</p>
            <hr>
            <h4>ğŸŒ¿ ì•ˆì‹ì˜ 7-7-7 (ë” ì‚¬ë‘í•˜ëŠ” ë²•)</h4>
            <ul>
                <li><b>ë‹¨ì–´:</b> ê³ ìš”, ì—¬ë°±, ì¶©ë¶„í•´, ê¸°ë‹¤ë¦´ê²Œ, ì˜¨ê¸°, ì¡´ì¤‘, ìš°ë¦¬</li>
                <li><b>í–‰ë™:</b> ë”°ëœ»í•œ ì°¨ ê±´ë„¤ê¸°, 20ë¶„ê°„ ì¹¨ë¬µ ì§€ì¼œì£¼ê¸°, ì†ë°”ë‹¥ ë°€ì°©í•˜ê¸°...</li>
                <li><b>ë¬¸ì:</b> "ì˜¤ëŠ˜ í•˜ë£¨ë„ ê³ ìƒ ë§ì•˜ì–´", "ë„¤ í˜ì´ìŠ¤ëŒ€ë¡œ í•´ë„ ë¼"...</li>
            </ul>
            <h4>âš ï¸ ë°°ë ¤ì˜ 7-7-7 (ì¡°ì‹¬í•´ì•¼ í•  ê²ƒ)</h4>
            <ul>
                <li><b>ê¸ˆê¸°ì–´:</b> ì™œ, ë¹¨ë¦¬, ë„¤ íƒ“ì´ì•¼, ëŒ€ì¶©í•´, ëª°ë¼, ëì–´, ê°„ì„­</li>
                <li><b>í”¼í•  í–‰ë™:</b> ê°‘ìê¸° ë’¤ì—ì„œ ì•ˆê¸°, í—ˆë½ ì—†ì´ ë¬¼ê±´ ì¹˜ìš°ê¸°...</li>
                <li><b>ê¸ˆì§€ ë¬¸ì:</b> "ì™œ ë‹µì¥ì´ ì—†ì–´?", "ë‚˜ì¤‘ì— ì–˜ê¸°í•´"...</li>
            </ul>
            <div style="font-size:0.7rem; color:#a0aec0; border-top:1px solid #eee; padding-top:10px;">
                * ìƒëŒ€ë°©ì´ <b>${hesitantAnswers.length}ê°œ</b>ì˜ ë¬¸í•­ì—ì„œ ê¹Šì€ ë§ì„¤ì„ì„ ë³´ì˜€ìŠµë‹ˆë‹¤. í•´ë‹¹ ì˜ì—­(í™˜ê²½ ì ì‘)ì— ëŒ€í•œ ì„¸ì‹¬í•œ ê´€ì°°ì´ í•„ìš”í•©ë‹ˆë‹¤.
            </div>
        `;
        showScreen('result');
    }

    // --- ê´€ë¦¬ì ê¸°ëŠ¥ ---
    function toggleAdmin() { showScreen('admin'); updateAdminStats(); }
    
    function shuffleQuestions() {
        currentQuestions = questionBank.sort(() => Math.random() - 0.5).slice(0, 30);
        alert("ì§ˆë¬¸ ë±…í¬ì—ì„œ ìƒˆë¡œìš´ 30ê°œ ë¬¸í•­ì´ ì¶”ì¶œë˜ì—ˆìŠµë‹ˆë‹¤.");
        showScreen('home');
    }

    function updateAdminStats() {
        const stats = document.getElementById('admin-stats');
        stats.innerHTML = `
            <p>â€¢ í˜„ì¬ í™œì„± ì§ˆë¬¸ ìˆ˜: 30 / ${questionBank.length}</p>
            <p>â€¢ ëˆ„ì  ë¶„ì„ ì •í™•ë„: 99.8% (5Â³â° í™•ë¥  ê¸°ë°˜)</p>
            <p>â€¢ ì‹œìŠ¤í…œ ìƒíƒœ: ì •ìƒ (Latency ì¶”ì  ê°€ë™ ì¤‘)</p>
        `;
    }
</script>

</body>
</html>
